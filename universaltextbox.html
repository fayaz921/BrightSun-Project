<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Mixed Text Utility Tool</title>
  <!-- Bootstrap 5 -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <style>
    body { padding: 20px; background: #f8f9fa; }
    .tool-card { max-width: 1100px; margin: auto; }
    textarea { min-height: 180px; resize: vertical; }
    .small-muted { font-size: .85rem; color: #6c757d; }
  </style>
</head>
<body>
  <div class="card tool-card shadow-sm">
    <div class="card-body">
      <h3 class="card-title mb-1">Universal Text Toolbox</h3>
      <p class="small-muted">HTML + Bootstrap + JavaScript — ایک آسان اور تیز ٹول جو Upper/Lower تبادلوں، رنگ، اور بہت کچھ کر سکتا ہے۔</p>

      <div class="row g-3 mt-3">
        <div class="col-12 col-md-8">
          <label for="inputText" class="form-label">اپنا متن یہاں لکھیں / پیسٹ کریں</label>
          <textarea id="inputText" class="form-control" placeholder="یہاں اپنا متن ڈالیں..."></textarea>

          <div class="d-flex flex-wrap gap-2 mt-3">
            <button class="btn btn-primary btn-sm" onclick="toUpper()">UPPERCASE ←</button>
            <button class="btn btn-primary btn-sm" onclick="toLower()">lowercase ←</button>
            <button class="btn btn-secondary btn-sm" onclick="toggleCase()">Toggle Case</button>
            <button class="btn btn-success btn-sm" onclick="titleCase()">Title Case</button>
            <button class="btn btn-warning btn-sm" onclick="removeExtraSpaces()">Remove Extra Spaces</button>
            <button class="btn btn-info btn-sm" onclick="reverseText()">Reverse</button>
            <button class="btn btn-outline-dark btn-sm" onclick="clearText()">Clear</button>
          </div>

          <div class="row g-2 align-items-center mt-3">
            <div class="col-6 col-sm-4 col-md-3">
              <label class="form-label">Text Color</label>
              <input type="color" id="textColor" class="form-control form-control-color" value="#000000" onchange="applyTextColor()">
            </div>
            <div class="col-6 col-sm-4 col-md-3">
              <label class="form-label">Background</label>
              <input type="color" id="bgColor" class="form-control form-control-color" value="#ffffff" onchange="applyBgColor()">
            </div>
            <div class="col-6 col-sm-4 col-md-3">
              <label class="form-label">Font size</label>
              <select id="fontSize" class="form-select" onchange="applyFontSize()">
                <option value="16">16px (default)</option>
                <option value="18">18px</option>
                <option value="20">20px</option>
                <option value="24">24px</option>
                <option value="28">28px</option>
              </select>
            </div>
            <div class="col-6 col-sm-4 col-md-3">
              <label class="form-label">Font Family</label>
              <select id="fontFamily" class="form-select" onchange="applyFontFamily()">
                <option value="inherit">Default</option>
                <option value="Arial, Helvetica, sans-serif">Arial</option>
                <option value="'Courier New', monospace">Courier New</option>
                <option value="Georgia, serif">Georgia</option>
                <option value="'Times New Roman', serif">Times New Roman</option>
              </select>
            </div>
          </div>

          <div class="d-flex flex-wrap gap-2 mt-3">
            <button class="btn btn-outline-primary btn-sm" onclick="copyText()">Copy</button>
            <button class="btn btn-outline-success btn-sm" onclick="downloadTxt()">Download .txt</button>
            <button class="btn btn-outline-secondary btn-sm" onclick="speakText()">Speak</button>
            <button class="btn btn-outline-danger btn-sm" onclick="stopSpeaking()">Stop</button>
            <button class="btn btn-outline-info btn-sm" onclick="preview()">Preview</button>
            <button class="btn btn-outline-dark btn-sm" onclick="restoreDefaults()">Restore Defaults</button>
          </div>

        </div>

        <div class="col-12 col-md-4">
          <div class="card h-100">
            <div class="card-body">
              <h6>Statistics</h6>
              <p id="stats" class="mb-0 small-muted">Words: 0 • Characters: 0 • Lines: 0</p>

              <hr>
              <h6>Quick Actions</h6>
              <div class="d-grid gap-2">
                <button class="btn btn-outline-primary btn-sm" onclick="countSentences()">Count Sentences</button>
                <button class="btn btn-outline-primary btn-sm" onclick="extractEmails()">Extract Emails</button>
                <button class="btn btn-outline-primary btn-sm" onclick="removeBlankLines()">Remove Blank Lines</button>
              </div>

              <hr>
              <h6>Share / Embed</h6>
              <p class="small-muted">Copy the result or download as .txt to use in videos or social posts. "Thank you for watching" text template included.</p>
              <div class="mt-2">
                <button class="btn btn-outline-success btn-sm w-100" onclick="insertThanks()">Insert "Thank you for watching"</button>
              </div>
            </div>
          </div>

          <div class="mt-3 text-center small-muted">Built with HTML · Bootstrap · Vanilla JS</div>
        </div>
      </div>
    </div>
  </div>

  <!-- Preview modal -->
  <div class="modal fade" id="previewModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-lg modal-dialog-centered">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Preview</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
          <div id="previewArea" style="white-space: pre-wrap;"></div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-secondary" data-bs-dismiss="modal">Close</button>
        </div>
      </div>
    </div>
  </div>

  <!-- Bootstrap + JS -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    const input = document.getElementById('inputText');
    const stats = document.getElementById('stats');

    function updateStats(){
      const text = input.value;
      const words = (text.trim() === '') ? 0 : text.trim().split(/\s+/).length;
      const chars = text.length;
      const lines = text.split(/\n/).length;
      stats.textContent = `Words: ${words} • Characters: ${chars} • Lines: ${lines}`;
    }

    input.addEventListener('input', updateStats);

    function toUpper(){ input.value = input.value.toUpperCase(); updateStats(); }
    function toLower(){ input.value = input.value.toLowerCase(); updateStats(); }
    function toggleCase(){
      const s = input.value.split('').map(ch => {
        if (ch === ch.toUpperCase()) return ch.toLowerCase();
        return ch.toUpperCase();
      }).join('');
      input.value = s; updateStats();
    }
    function titleCase(){
      input.value = input.value.toLowerCase().replace(/\b\w/g, c => c.toUpperCase()); updateStats();
    }
    function removeExtraSpaces(){ input.value = input.value.replace(/\s+/g,' ').trim(); updateStats(); }
    function reverseText(){ input.value = input.value.split('').reverse().join(''); updateStats(); }
    function clearText(){ input.value = ''; updateStats(); }

    function applyTextColor(){ input.style.color = document.getElementById('textColor').value; }
    function applyBgColor(){ input.style.background = document.getElementById('bgColor').value; }
    function applyFontSize(){ input.style.fontSize = document.getElementById('fontSize').value + 'px'; }
    function applyFontFamily(){ input.style.fontFamily = document.getElementById('fontFamily').value; }

    function copyText(){ navigator.clipboard.writeText(input.value).then(()=>{ alert('Copied to clipboard'); }); }

    function downloadTxt(){
      const blob = new Blob([input.value], {type: 'text/plain'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a');
      a.href = url; a.download = 'texttool-result.txt'; document.body.appendChild(a); a.click(); a.remove(); URL.revokeObjectURL(url);
    }

    // Speech
    let utter;
    function speakText(){
      if (!('speechSynthesis' in window)) { alert('Speech not supported in this browser.'); return; }
      stopSpeaking();
      utter = new SpeechSynthesisUtterance(input.value || '');
      speechSynthesis.speak(utter);
    }
    function stopSpeaking(){ if (utter) speechSynthesis.cancel(); }

    function preview(){
      const previewArea = document.getElementById('previewArea');
      previewArea.style.color = document.getElementById('textColor').value;
      previewArea.style.background = document.getElementById('bgColor').value;
      previewArea.style.fontSize = document.getElementById('fontSize').value + 'px';
      previewArea.style.fontFamily = document.getElementById('fontFamily').value;
      previewArea.textContent = input.value;
      const modal = new bootstrap.Modal(document.getElementById('previewModal'));
      modal.show();
    }

    function restoreDefaults(){
      document.getElementById('textColor').value = '#000000';
      document.getElementById('bgColor').value = '#ffffff';
      document.getElementById('fontSize').value = '16';
      document.getElementById('fontFamily').value = 'inherit';
      applyTextColor(); applyBgColor(); applyFontSize(); applyFontFamily();
    }

    // Extra utilities
    function countSentences(){
      const s = input.value.trim();
      if (!s) return alert('No text');
      const sentences = s.split(/[.!?]+/).filter(Boolean).length;
      alert('Sentences: ' + sentences);
    }
    function extractEmails(){
      const re = /[a-zA-Z0-9._%+-]+@[a-z0-9.-]+\.[a-z]{2,}/gi;
      const found = input.value.match(re) || [];
      prompt('Found emails (copy):', found.join('\n') || 'None');
    }
    function removeBlankLines(){ input.value = input.value.split(/\n/).filter(l => l.trim() !== '').join('\n'); updateStats(); }
    function insertThanks(){ input.value += (input.value ? '\n\n' : '') + 'Thank you for watching'; updateStats(); }

    // initialize
    restoreDefaults(); updateStats();
  </script>
</body>
</html>
